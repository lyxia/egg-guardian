# 需求文档

## 简介

修复工资计算和工资条显示中的两个关键问题：实际领取金额与预计金额不符（差5蛋币），以及工资条记录信息不完整（缺少扣除和实际领取信息）。

## 术语表

- **System**: 蛋仔守护者工资管理系统
- **User**: 使用应用的儿童用户
- **Parent**: 核对任务完成情况的家长
- **Base Salary**: 基础工资，所有任务的总价值
- **Deduction**: 扣除金额，未完成任务导致的工资减少
- **Actual Amount**: 实际领取金额，基础工资减去扣除后的金额
- **Salary Record**: 工资条记录，保存每次工资领取的详细信息

## 需求

### 需求 1: 工资计算准确性

**用户故事:** 作为用户，我希望预计守护显示的金额与实际领取的金额完全一致，这样我才能信任系统的计算。

#### 验收标准

1. WHEN Parent 完成任务核对并点击确认领取按钮, THE System SHALL 计算实际领取金额等于基础工资减去所有未完成任务的价值
2. WHEN System 显示预计守护金额, THE System SHALL 确保该金额与最终增加到余额的金额完全相同
3. WHEN System 执行工资领取操作, THE System SHALL 验证计算结果无舍入误差或逻辑错误
4. WHEN User 查看余额变化, THE System SHALL 确保余额增加量等于预计守护显示的金额

### 需求 2: 工资条信息完整性

**用户故事:** 作为用户，我希望在工资条中看到完整的工资计算明细，包括基础工资、扣除金额和实际领取金额，这样我可以了解每次工资的详细情况。

#### 验收标准

1. WHEN System 保存工资记录, THE System SHALL 存储基础工资、扣除金额和实际领取金额三个字段
2. WHEN User 查看工资条详情, THE System SHALL 显示基础工资金额
3. WHEN User 查看工资条详情, THE System SHALL 显示扣除金额（如果有未完成任务）
4. WHEN User 查看工资条详情, THE System SHALL 显示实际领取金额
5. WHEN User 查看工资条详情, THE System SHALL 清晰标注每个金额的含义

### 需求 3: 数据一致性

**用户故事:** 作为开发者，我希望工资计算逻辑在预览和实际领取时保持一致，避免重复计算或不同步的问题。

#### 验收标准

1. THE System SHALL 使用统一的计算函数来计算预计金额和实际领取金额
2. WHEN System 计算工资, THE System SHALL 确保预览计算和最终计算使用相同的输入数据
3. WHEN System 更新余额, THE System SHALL 使用与预览显示相同的计算结果
4. THE System SHALL 在工资记录中保存与用户看到的预计金额一致的实际金额
